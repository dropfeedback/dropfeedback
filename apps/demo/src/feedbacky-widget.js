"use strict";(()=>{var Kt=Object.defineProperty,Yt=Object.defineProperties;var Qt=Object.getOwnPropertyDescriptors;var mt=Object.getOwnPropertySymbols;var Zt=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var lt=(e,t,n)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ut=(e,t)=>{for(var n in t||(t={}))Zt.call(t,n)&&lt(e,n,t[n]);if(mt)for(var n of mt(t))te.call(t,n)&&lt(e,n,t[n]);return e},gt=(e,t)=>Yt(e,Qt(t));var p=(e,t,n)=>(lt(e,typeof t!="symbol"?t+"":t,n),n);var R=(e,t,n)=>new Promise((o,r)=>{var i=l=>{try{c(n.next(l))}catch(u){r(u)}},s=l=>{try{c(n.throw(l))}catch(u){r(u)}},c=l=>l.done?o(l.value):Promise.resolve(l.value).then(i,s);c((n=n.apply(e,t)).next())});function _(){}function $(e,t){for(let n in t)e[n]=t[n];return e}function at(e){return e()}function Q(){return Object.create(null)}function w(e){e.forEach(at)}function J(e){return typeof e=="function"}function E(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function xt(e){return Object.keys(e).length===0}function bt(e,...t){if(e==null){for(let o of t)o(void 0);return _}let n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function yt(e,t,n){e.$$.on_destroy.push(bt(t,n))}function $t(e,t,n,o){if(e){let r=wt(e,t,n,o);return e[0](r)}}function wt(e,t,n,o){return e[1]&&o?$(n.ctx.slice(),e[1](o(t))):n.ctx}function vt(e,t,n,o){if(e[2]&&o){let r=e[2](o(n));if(t.dirty===void 0)return r;if(typeof r=="object"){let i=[],s=Math.max(t.dirty.length,r.length);for(let c=0;c<s;c+=1)i[c]=t.dirty[c]|r[c];return i}return t.dirty|r}return t.dirty}function Ft(e,t,n,o,r,i){if(r){let s=wt(t,n,o,i);e.p(s,r)}}function kt(e){if(e.ctx.length>32){let t=[],n=e.ctx.length/32;for(let o=0;o<n;o++)t[o]=-1;return t}return-1}function q(e){let t={};for(let n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function S(e,t){let n={};t=new Set(t);for(let o in e)!t.has(o)&&o[0]!=="$"&&(n[o]=e[o]);return n}var ft=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var Z=class e{constructor(t){p(this,"_listeners","WeakMap"in ft?new WeakMap:void 0);p(this,"_observer");p(this,"options");this.options=t}observe(t,n){return this._listeners.set(t,n),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){var t;return(t=this._observer)!=null?t:this._observer=new ResizeObserver(n=>{var o;for(let r of n)e.entries.set(r.target,r),(o=this._listeners.get(r.target))==null||o(r)})}};Z.entries="WeakMap"in ft?new WeakMap:void 0;var Et=!1;function St(){Et=!0}function Ot(){Et=!1}function h(e,t){e.appendChild(t)}function M(e,t,n){let o=jt(e);if(!o.getElementById(t)){let r=g("style");r.id=t,r.textContent=n,oe(o,r)}}function jt(e){if(!e)return document;let t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function oe(e,t){return h(e.head||e,t),t.sheet}function y(e,t,n){e.insertBefore(t,n||null)}function x(e){e.parentNode&&e.parentNode.removeChild(e)}function g(e){return document.createElement(e)}function B(e){return document.createTextNode(e)}function D(){return B(" ")}function At(){return B("")}function N(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function Ct(e){return function(t){return t.preventDefault(),e.call(this,t)}}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}var re=["width","height"];function z(e,t){let n=Object.getOwnPropertyDescriptors(e.__proto__);for(let o in t)t[o]==null?e.removeAttribute(o):o==="style"?e.style.cssText=t[o]:o==="__value"?e.value=e[o]=t[o]:n[o]&&n[o].set&&re.indexOf(o)===-1?e[o]=t[o]:d(e,o,t[o])}function Mt(e){return Array.from(e.childNodes)}function Dt(e,t){t=""+t,e.data!==t&&(e.data=t)}function dt(e,t){e.value=t==null?"":t}function O(e,t,n){e.classList.toggle(t,!!n)}function Nt(e){let t={};return e.childNodes.forEach(n=>{t[n.slot||"default"]=!0}),t}var G;function j(e){G=e}function Pt(e,t){let n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}var L=[];var H=[],V=[],_t=[],ae=Promise.resolve(),ht=!1;function It(){ht||(ht=!0,ae.then(A))}function X(e){V.push(e)}function Lt(e){_t.push(e)}var pt=new Set,W=0;function A(){if(W!==0)return;let e=G;do{try{for(;W<L.length;){let t=L[W];W++,j(t),fe(t.$$)}}catch(t){throw L.length=0,W=0,t}for(j(null),L.length=0,W=0;H.length;)H.pop()();for(let t=0;t<V.length;t+=1){let n=V[t];pt.has(n)||(pt.add(n),n())}V.length=0}while(L.length);for(;_t.length;)_t.pop()();ht=!1,pt.clear(),j(e)}function fe(e){if(e.fragment!==null){e.update(),w(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(X)}}function Rt(e){let t=[],n=[];V.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),V=t}var tt=new Set,de;function F(e,t){e&&e.i&&(tt.delete(e),e.i(t))}function C(e,t,n,o){if(e&&e.o){if(tt.has(e))return;tt.add(e),de.c.push(()=>{tt.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function et(e,t){let n={},o={},r={$$scope:1},i=e.length;for(;i--;){let s=e[i],c=t[i];if(c){for(let l in s)l in c||(o[l]=1);for(let l in c)r[l]||(n[l]=c[l],r[l]=1);e[i]=c}else for(let l in s)r[l]=1}for(let s in o)s in n||(n[s]=void 0);return n}var pe=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],_e=new Set([...pe]);function qt(e,t,n){let o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function ot(e){e&&e.c()}function K(e,t,n){let{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),X(()=>{let i=e.$$.on_mount.map(at).filter(J);e.$$.on_destroy?e.$$.on_destroy.push(...i):w(i),e.$$.on_mount=[]}),r.forEach(X)}function Y(e,t){let n=e.$$;n.fragment!==null&&(Rt(n.after_update),w(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ge(e,t){e.$$.dirty[0]===-1&&(L.push(e),It(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function T(e,t,n,o,r,i,s,c=[-1]){let l=G;j(e);let u=e.$$={fragment:null,ctx:[],props:i,update:_,not_equal:r,bound:Q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:Q(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};s&&s(u.root);let f=!1;if(u.ctx=n?n(e,t.props||{},(a,v,...m)=>{let b=m.length?m[0]:v;return u.ctx&&r(u.ctx[a],u.ctx[a]=b)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](b),f&&ge(e,a)),v}):[],u.update(),f=!0,w(u.before_update),u.fragment=o?o(u.ctx):!1,t.target){if(t.hydrate){St();let a=Mt(t.target);u.fragment&&u.fragment.l(a),a.forEach(x)}else u.fragment&&u.fragment.c();t.intro&&F(e.$$.fragment),K(e,t.target,t.anchor),Ot(),A()}j(l)}var Bt;typeof HTMLElement=="function"&&(Bt=class extends HTMLElement{constructor(t,n,o){super();p(this,"$$ctor");p(this,"$$s");p(this,"$$c");p(this,"$$cn",!1);p(this,"$$d",{});p(this,"$$r",!1);p(this,"$$p_d",{});p(this,"$$l",{});p(this,"$$l_u",new Map);this.$$ctor=t,this.$$s=n,o&&this.attachShadow({mode:"open"})}addEventListener(t,n,o){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(n),this.$$c){let r=this.$$c.$on(t,n);this.$$l_u.set(n,r)}super.addEventListener(t,n,o)}removeEventListener(t,n,o){if(super.removeEventListener(t,n,o),this.$$c){let r=this.$$l_u.get(n);r&&(r(),this.$$l_u.delete(n))}}connectedCallback(){return R(this,null,function*(){if(this.$$cn=!0,!this.$$c){let t=function(i){return()=>{let s;return{c:function(){s=g("slot"),i!=="default"&&d(s,"name",i)},m:function(u,f){y(u,s,f)},d:function(u){u&&x(s)}}}};if(yield Promise.resolve(),!this.$$cn)return;let n={},o=Nt(this);for(let i of this.$$s)i in o&&(n[i]=[t(i)]);for(let i of this.attributes){let s=this.$$g_p(i.name);s in this.$$d||(this.$$d[s]=nt(s,i.value,this.$$p_d,"toProp"))}this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:gt(ut({},this.$$d),{$$slots:n,$$scope:{ctx:[]}})});let r=()=>{this.$$r=!0;for(let i in this.$$p_d)if(this.$$d[i]=this.$$c.$$.ctx[this.$$c.$$.props[i]],this.$$p_d[i].reflect){let s=nt(i,this.$$d[i],this.$$p_d,"toAttribute");s==null?this.removeAttribute(i):this.setAttribute(this.$$p_d[i].attribute||i,s)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(let i in this.$$l)for(let s of this.$$l[i]){let c=this.$$c.$on(i,s);this.$$l_u.set(s,c)}this.$$l={}}})}attributeChangedCallback(t,n,o){var r;this.$$r||(t=this.$$g_p(t),this.$$d[t]=nt(t,o,this.$$p_d,"toProp"),(r=this.$$c)==null||r.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(t){return Object.keys(this.$$p_d).find(n=>this.$$p_d[n].attribute===t||!this.$$p_d[n].attribute&&n.toLowerCase()===t)||t}});function nt(e,t,n,o){var i;let r=(i=n[e])==null?void 0:i.type;if(t=r==="Boolean"&&typeof t!="boolean"?t!=null:t,!o||!n[e])return t;if(o==="toAttribute")switch(r){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t==null?null:t;default:return t}else switch(r){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function P(e,t,n,o,r,i){let s=class extends Bt{constructor(){super(e,n,r),this.$$p_d=t}static get observedAttributes(){return Object.keys(t).map(c=>(t[c].attribute||c).toLowerCase())}};return Object.keys(t).forEach(c=>{Object.defineProperty(s.prototype,c,{get(){return this.$$c&&c in this.$$c?this.$$c[c]:this.$$d[c]},set(l){var u;l=nt(c,l,t),this.$$d[c]=l,(u=this.$$c)==null||u.$set({[c]:l})}})}),o.forEach(c=>{Object.defineProperty(s.prototype,c,{get(){var l;return(l=this.$$c)==null?void 0:l[c]}})}),i&&(s=i(s)),e.element=s,s}var k=class{constructor(){p(this,"$$");p(this,"$$set")}$destroy(){Y(this,1),this.$destroy=_}$on(t,n){if(!J(n))return _;let o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{let r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!xt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var zt="4";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zt);function xe(e){M(e,"svelte-1dc84yi","dialog.svelte-1dc84yi{padding-top:2rem;position:relative}.close.svelte-1dc84yi{appearance:none;background-color:transparent;cursor:pointer;border:none;position:absolute;right:0;top:0;padding:0.5rem;user-select:none}")}function be(e){let t,n,o,r,i,s,c=e[3].default,l=$t(c,e,e[2],null),u=[{id:"feedback-form-dialog"},e[1]],f={};for(let a=0;a<u.length;a+=1)f=$(f,u[a]);return{c(){t=g("dialog"),n=g("button"),n.textContent="X",o=D(),l&&l.c(),d(n,"aria-label","Close"),d(n,"class","close svelte-1dc84yi"),z(t,f),O(t,"svelte-1dc84yi",!0)},m(a,v){y(a,t,v),h(t,n),h(t,o),l&&l.m(t,null),e[5](t),r=!0,i||(s=N(n,"click",e[4]),i=!0)},p(a,[v]){l&&l.p&&(!r||v&4)&&Ft(l,c,a,a[2],r?vt(c,a[2],v,null):kt(a[2]),null),z(t,f=et(u,[{id:"feedback-form-dialog"},v&2&&a[1]])),O(t,"svelte-1dc84yi",!0)},i(a){r||(F(l,a),r=!0)},o(a){C(l,a),r=!1},d(a){a&&x(t),l&&l.d(a),e[5](null),i=!1,s()}}}function ye(e,t,n){let o=["dialog"],r=S(t,o),{$$slots:i={},$$scope:s}=t,{dialog:c}=t,l=()=>c.close();function u(f){H[f?"unshift":"push"](()=>{c=f,n(0,c)})}return e.$$set=f=>{t=$($({},t),q(f)),n(1,r=S(t,o)),"dialog"in f&&n(0,c=f.dialog),"$$scope"in f&&n(2,s=f.$$scope)},[c,r,s,i,l,u]}var rt=class extends k{constructor(t){super(),T(this,t,ye,be,E,{dialog:0},xe)}get dialog(){return this.$$.ctx[0]}set dialog(t){this.$$set({dialog:t}),A()}};P(rt,{dialog:{}},["default"],[],!0);var Gt=rt;var U=[];function Wt(e,t=_){let n,o=new Set;function r(c){if(E(e,c)&&(e=c,n)){let l=!U.length;for(let u of o)u[1](),U.push(u,e);if(l){for(let u=0;u<U.length;u+=2)U[u][0](U[u+1]);U.length=0}}}function i(c){r(c(e))}function s(c,l=_){let u=[c,l];return o.add(u),o.size===1&&(n=t(r,i)||_),c(e),()=>{o.delete(u),o.size===0&&n&&(n(),n=null)}}return{set:r,update:i,subscribe:s}}var Vt={API_URL:"http://localhost:3001"};var Ht=e=>R(void 0,null,function*(){try{let t=yield fetch(`${Vt.API_URL}/feedbacks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=yield t.json();if(!t.ok)throw new Error(n.message);return n}catch(t){throw new Error(t)}});function $e(e){M(e,"svelte-ou3gji",".submit.svelte-ou3gji{width:100%;background-color:var(--fw-brand-color);color:white}.submit.loading.svelte-ou3gji{cursor:wait;opacity:0.5}form.svelte-ou3gji{display:flex;flex-direction:column;gap:1rem;width:100%}h2.svelte-ou3gji{padding:0;margin:0;text-align:center;text-transform:uppercase}textarea.svelte-ou3gji{padding:4px;resize:none;border:1px solid #d1d5db}p.svelte-ou3gji{padding:0;margin:0;color:#ef4444;font-size:0.75rem}")}function Ut(e){let t,n;return{c(){t=g("p"),n=B(e[0]),d(t,"title","form-errors"),d(t,"class","svelte-ou3gji")},m(o,r){y(o,t,r),h(t,n)},p(o,r){r&1&&Dt(n,o[0])},d(o){o&&x(t)}}}function we(e){let t,n,o,r,i,s,c,l,u,f,a,v,m=e[0]&&Ut(e);return{c(){t=g("form"),n=g("h2"),n.textContent="Send your feedback",o=D(),r=g("textarea"),c=D(),l=g("button"),u=g("span"),u.textContent="Submit",f=D(),m&&m.c(),d(n,"class","svelte-ou3gji"),r.autofocus=!0,r.disabled=e[1],d(r,"aria-label","Feedback"),d(r,"name","feedback"),d(r,"placeholder","Please enter your feedback."),r.required=!0,d(r,"maxlength",i=500),d(r,"rows",s=4),d(r,"class","svelte-ou3gji"),d(u,"class","uppercase"),d(l,"type","submit"),l.disabled=e[1],d(l,"class","submit svelte-ou3gji"),O(l,"loading",e[1]),d(t,"method","dialog"),d(t,"class","svelte-ou3gji")},m(b,I){y(b,t,I),h(t,n),h(t,o),h(t,r),dt(r,e[2].content),h(t,c),h(t,l),h(l,u),h(t,f),m&&m.m(t,null),r.focus(),a||(v=[N(r,"input",e[7]),N(t,"submit",Ct(e[4]))],a=!0)},p(b,[I]){I&2&&(r.disabled=b[1]),I&4&&dt(r,b[2].content),I&2&&(l.disabled=b[1]),I&2&&O(l,"loading",b[1]),b[0]?m?m.p(b,I):(m=Ut(b),m.c(),m.m(t,null)):m&&(m.d(1),m=null)},i:_,o:_,d(b){b&&x(t),m&&m.d(),a=!1,w(v)}}}function ve(e,t,n){let o,{widgetProps:r}=t,{onFinish:i}=t,s=Wt({content:""});yt(e,s,a=>n(2,o=a));let c="",l=!1,u=()=>R(this,null,function*(){n(1,l=!0);try{yield Ht({content:o.content,projectId:r.projectId,meta:(r==null?void 0:r.meta)||null}),i(o),s.set({content:""})}catch(a){n(0,c=a.message)}finally{n(1,l=!1)}});function f(){o.content=this.value,s.set(o)}return e.$$set=a=>{"widgetProps"in a&&n(5,r=a.widgetProps),"onFinish"in a&&n(6,i=a.onFinish)},[c,l,o,s,u,r,i,f]}var it=class extends k{constructor(t){super(),T(this,t,ve,we,E,{widgetProps:5,onFinish:6},$e)}get widgetProps(){return this.$$.ctx[5]}set widgetProps(t){this.$$set({widgetProps:t}),A()}get onFinish(){return this.$$.ctx[6]}set onFinish(t){this.$$set({onFinish:t}),A()}};P(it,{widgetProps:{},onFinish:{}},[],[],!0);var Jt=it;function Fe(e){M(e,"svelte-dnd5t2","button.svelte-dnd5t2{appearance:none;border:none;position:absolute;bottom:0.5rem;right:0.5rem;padding:0.5rem 1rem;border-radius:0.5rem;box-shadow:0 0.25rem 0.5rem rgba(0, 0, 0, 0.25);font-weight:bold;color:white;background-color:var(--fw-brand-color);transition:background-color 0.2s ease-in-out}")}function ke(e){let t,n,o,r,i=[e[0]],s={};for(let c=0;c<i.length;c+=1)s=$(s,i[c]);return{c(){t=g("button"),n=B("feedbacky"),z(t,s),O(t,"svelte-dnd5t2",!0)},m(c,l){y(c,t,l),h(t,n),t.autofocus&&t.focus(),o||(r=N(t,"click",e[1]),o=!0)},p(c,[l]){z(t,s=et(i,[l&1&&c[0]])),O(t,"svelte-dnd5t2",!0)},i:_,o:_,d(c){c&&x(t),o=!1,r()}}}function Ee(e,t,n){let o=[],r=S(t,o);function i(s){Pt.call(this,e,s)}return e.$$set=s=>{t=$($({},t),q(s)),n(0,r=S(t,o))},[r,i]}var st=class extends k{constructor(t){super(),T(this,t,Ee,ke,E,{},Fe)}};P(st,{},[],[],!0);var Xt=st;function Se(e){M(e,"svelte-1hjzf7t",":host,.feedbacky-widget{--fw-brand-color:#ed7138}")}function Oe(e){let t,n,o,r,i,s;n=new Xt({}),n.$on("click",e[2]);function c(u){e[4](u)}let l={$$slots:{default:[je]},$$scope:{ctx:e}};return e[0]!==void 0&&(l.dialog=e[0]),r=new Gt({props:l}),H.push(()=>qt(r,"dialog",c)),{c(){t=g("div"),ot(n.$$.fragment),o=D(),ot(r.$$.fragment),d(t,"class","feedbacky-widget")},m(u,f){y(u,t,f),K(n,t,null),h(t,o),K(r,t,null),s=!0},p(u,f){let a={};f&65&&(a.$$scope={dirty:f,ctx:u}),!i&&f&1&&(i=!0,a.dialog=u[0],Lt(()=>i=!1)),r.$set(a)},i(u){s||(F(n.$$.fragment,u),F(r.$$.fragment,u),s=!0)},o(u){C(n.$$.fragment,u),C(r.$$.fragment,u),s=!1},d(u){u&&x(t),Y(n),Y(r)}}}function je(e){let t,n;return t=new Jt({props:{widgetProps:{projectId:e[1].projectId,meta:e[1].meta},onFinish:e[3]}}),{c(){ot(t.$$.fragment)},m(o,r){K(t,o,r),n=!0},p(o,r){let i={};r&1&&(i.onFinish=o[3]),t.$set(i)},i(o){n||(F(t.$$.fragment,o),n=!0)},o(o){C(t.$$.fragment,o),n=!1},d(o){Y(t,o)}}}function Ae(e){var r;let t,n,o=((r=e[1])==null?void 0:r.projectId)&&Oe(e);return{c(){o&&o.c(),t=At()},m(i,s){o&&o.m(i,s),y(i,t,s),n=!0},p(i,[s]){var c;(c=i[1])!=null&&c.projectId&&o.p(i,s)},i(i){n||(F(o),n=!0)},o(i){C(o),n=!1},d(i){i&&x(t),o&&o.d(i)}}}function Ce(e,t,n){let o=[],r=S(t,o),i={projectId:r==null?void 0:r["project-id"],meta:r!=null&&r.meta?JSON.parse(r.meta):null};i!=null&&i.projectId||console.error("feedbacky: Missing project-id");let s,c=()=>s.showModal(),l=()=>{s.close()};function u(f){s=f,n(0,s)}return e.$$set=f=>{t=$($({},t),q(f)),n(5,r=S(t,o))},[s,i,c,l,u]}var ct=class extends k{constructor(t){super(),T(this,t,Ce,Ae,E,{},Se)}};customElements.define("feedbacky-widget",P(ct,{},[],[],!0));var Me=ct;})();
